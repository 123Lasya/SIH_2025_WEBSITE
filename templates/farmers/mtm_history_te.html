{% extends "base.html" %} {% block content %}

<h2 class="mb-3">Daily MTM History</h2>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>Date</th>
      <th>Hedge ID</th>
      <th>Type</th>
      <th>Crop</th>
      <th>Qty</th>
      <th>Hedge Price</th>
      <th>Market Price</th>
      <th>PnL</th>
      <th>Wallet Balance After MTM</th>
    </tr>
  </thead>

  <tbody>
    {% for row in history %}
    <tr>
      <td>{{ row.date }}</td>
      <td>{{ row.hedge_id }}</td>
      <td>{{ row.hedge_type }}</td>
      <td>{{ row.crop }}</td>
      <td>{{ row.quantity }}</td>
      <td>{{ row.hedge_price }}</td>
      <td>{{ row.market_price }}</td>

      <td>
        {% if row.pnl >= 0 %}
        <span style="color: green">+{{ row.pnl }}</span>
        {% else %}
        <span style="color: red">{{ row.pnl }}</span>
        {% endif %}
      </td>

      <td>{{ row.wallet_balance_after }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="9" class="text-center">No MTM history yet</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
